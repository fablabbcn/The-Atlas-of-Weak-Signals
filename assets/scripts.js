/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function Attractor(weaksignal, xCord, yCord) {
  this.ws = weaksignal;
  var length = width - 2 * padding;
  var interval = length / grid;
  var centerX = padding + interval * (xCord + 1);
  centerX = centerX - interval / 2;
  length = height - 2 * padding;
  interval = length / grid;
  var centerY = padding + interval * (yCord + 1);
  centerY = centerY - interval / 2;
  this.pos = createVector(centerX, centerY);
  this.vel = createVector(0, 0);
  this.acc = createVector(0, 0);
  this.mass = 6;
  this.G = 20; //was 80

  this.scaler = 5;

  this.calculateAttraction = function (p) {
    //calculate direction of force
    var force = p5.Vector.sub(this.pos, p.pos);
    push();
    var opa = noise(p.offset) * 255; // console.log(opa);

    stroke(color(50, 50, 50, opa)); // stroke(255);

    line(this.pos.x, this.pos.y, p.pos.x, p.pos.y);
    pop(); //distance between objects

    var distance = force.mag(); //limit vector to eliminate extreme values at very close or very far
    // distance = constrain(distance,20,25);

    distance = constrain(distance, 50, 55); //Not really important but is what it is to get direction

    force.normalize(); //calculate gravitational from magniitude

    var strength = this.G * this.mass * p.mass / (distance * distance); //get force vector --> magnitude * direction

    force.mult(strength); //var force;

    return force;
  };

  this.applyForce = function (force) {
    // A = F /M
    var f = force.copy();
    f.div(this.mass);
    this.acc.add(f);
  };

  this.update = function () {
    this.edges();
    this.vel.add(this.acc);
    this.pos.add(this.vel);
    this.acc.set(0, 0);
  };

  this.display = function () {
    push(); // fill(30,25,20);

    stroke(30, 25, 30); // ellipse(this.pos.x, this.pos.y, this.mass * this.scaler, this.mass * this.scaler);
    // fill(30,25,20);

    textAlign(CENTER, CENTER); // text(this.ws, this.pos.x, this.pos.y);

    pop();
  };

  this.edges = function () {
    if (this.pos.y > height) {
      this.vel.y *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }

    if (this.pos.x > width) {
      this.vel.x *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }

    if (this.pos.x < 0) {
      this.vel.x *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }

    if (this.pos.y < 0) {
      this.vel.x *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }
  };
}
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function Particle(x, y, a) {
  this.atlas = a;
  this.offset = randomIntFromInterval(0, 100) / 100;
  this.pos = createVector(x, y);
  this.vel = createVector(random(-3, 3), random(-3, 3));
  this.acc = createVector(0, -8); // this.vel = createVector(0,0);
  // this.acc = createVector(0,0);

  this.mass = 10;
  this.G = 5;
  this.previousVel = createVector(0, 0);
  this.maxSpeed = 3;
  this.theta = 0.0;
  this.size = 20; // this.maxForce = 1;

  this.history = [];

  this.update = function () {
    this.offset += 0.1; // console.log(this.offset);

    this.edges();
    this.vel.add(this.acc);
    this.vel.limit(this.maxSpeed);
    this.pos.add(this.vel);
    this.acc.set(0, 0);

    if (frameCount % 10 == 1) {
      var v = createVector(this.pos.x, this.pos.y);
      this.history.push(v);

      if (this.history.length > 8) {
        this.history.splice(0, 1);
      } // console.log(this.pos);
      // console.log("current ^ last v");
      // console.log(this.history);

    }
  };

  this.display = function () {
    this.trailing();
    var theta = this.vel.heading() + radians(90);
    this.theta += this.vel.x * this.vel.mag() / 20;
    var r = 4;
    push();
    translate(this.pos.x, this.pos.y); // rotate(this.theta);

    textAlign(CENTER, CENTER);
    textSize(12);
    stroke(255);
    fill(225);
    text(this.atlas.kw, 0, 0);
    pop();
  };

  this.trailing = function () {
    for (var i = 0; i < this.history.length; i++) {
      var pos = this.history[i];
      push();
      translate(pos.x, pos.y);
      stroke('#f2dd1c');
      fill(225);
      point(0, 0);
      pop();
    }
  };

  this.edges = function () {
    if (this.pos.x < -this.size) this.pos.x = width + this.size;
    if (this.pos.y < -this.size) this.pos.y = height + this.size;
    if (this.pos.x > width + this.size) this.pos.x = -this.size;
    if (this.pos.y > height + this.size) this.pos.y = -this.size;
  };

  this.separate = function (vehicles) {
    var desiredseparation = this.size * 1.1;
    var sum = createVector();
    var count = 0;

    for (var i = 0; i < vehicles.length; i++) {
      var d = p5.Vector.dist(this.pos, vehicles[i].pos);

      if (d > 0 && d < desiredseparation) {
        var diff = p5.Vector.sub(this.pos, vehicles[i].pos);
        diff.normalize();
        diff.div(d);
        sum.add(diff);
        count++;
      }
    }

    if (count > 0) {
      sum.div(count);
      sum.normalize();
      sum.mult(this.maxSpeed * 2);
      var steer = p5.Vector.sub(sum, this.velocity);
      steer.limit(this.maxforce);
      this.applyForce(steer);
    }
  };

  this.applyForce = function (force) {
    var f = force.copy();
    f.div(this.mass);
    this.acc.add(f);
  }; //calculate attraction


  this.calculateAttraction = function (obj) {
    //calculate direction of force
    var force = p5.Vector.sub(this.pos, obj.pos); //distance between objects

    var distance = force.mag(); //limit vector to eliminate extreme values at very close or very far
    //distance = constrain(distance,20,25);
    //Not really important but is what it is to get direction

    force.normalize(); //calculate gravitational from magniitude

    var strength = this.G * this.mass * obj.mass / (distance * distance); //get force vector --> magnitude * direction

    force.mult(strength); //var force;

    return force;
  };

  this.applyGravity = function () {
    for (var i = 0; i < attractors.length; i++) {
      var a = attractors[i];

      if (a.ws === this.atlas.ws) {
        //get everyone applied to and attract to it
        // console.log('attracted to: ' + a.ws);
        var f = a.calculateAttraction(this); // console.log(f);

        this.applyForce(f);
      }
    }
  };
}
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
// (function ($, window, document, undefined) {
var text1 = new Blotter.Text("under construction üëÅ‚Äçüó®", {
  family: "Overpass Mono",
  size: 84,
  fill: "#171717"
});
var text2 = new Blotter.Text("ATLAS OF WEAK SIGNALS", {
  family: "'Nexa Bold', sans-serif",
  size: 54,
  fill: "#171717"
});
var material = new Blotter.ChannelSplitMaterial();
var material2 = new Blotter.FliesMaterial(); // var blotter1 = new Blotter(material, { texts : text1 });
// var scope1 = blotter1.forText(text1);
// scope1.appendTo(document.body);

var blotter2 = new Blotter(material2, {
  texts: text2
});
var scope2 = blotter2.forText(text2);
scope2.appendTo(document.body);
setTimeout(function () {
  var element = $('.b-canvas').detach();
  $('.modal').prepend(element);
}, 2000);

(function () {
  var script = document.createElement("SCRIPT");
  script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js';
  script.type = 'text/javascript';

  script.onload = function () {
    $("#close").click(function (event) {
      event.preventDefault();
      $('.modal').hide();
    });
  };

  document.getElementsByTagName("head")[0].appendChild(script);
})(jQuery, window, document); //https://codepen.io/SimonEvans/pen/PQKgyQ
// https://github.com/bradley/blotter
// https://blotter.js.org/#/documentation
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function randomIntFromInterval(min, max) {
  //min max may be included
  return Math.floor(Math.random() * (max - min + 1) + min);
}

var particles = [];
var limit = 10;
var weaksignals = [];
var keywords = [];
var attractors = [];
var jsonData = {};
var padding = 100;
var grid = 5;

function preload() {
  var jsonFile = "../data/fromspreadsheet.json";
  jsonData = loadJSON(jsonFile);
  console.log(jsonData);
}

var cnv;

var atlasObj = function (weaksignal, keyword) {
  this.kw = keyword;
  this.ws = weaksignal;
};

function centerCanvas() {
  cnv = createCanvas(windowWidth, windowHeight);
  var x = (windowWidth - width) / 2;
  var y = (windowHeight - height) / 2;
  cnv.position(x, y);
}

function windowResized() {
  centerCanvas();
}

function setup() {
  centerCanvas();
  setupWeakSignals();
  textFont("Overpass Mono");
  frameRate(60);
  setupObjects();
}

function draw() {
  background('#000');
  clear();

  for (var i = 0; i < particles.length; i++) {
    particles[i].applyGravity(); // particles[i].separate(particles);
    // particles[i].separate(attractors);

    particles[i].update();
    particles[i].display();
  }

  textSize(14);
  fill(0);
  attractors.forEach(function (a) {
    a.update();
    a.display();
  });
}

function setupObjects() {
  weaksignals.forEach(function (ws, i) {
    keywords[i].forEach(function (kw, j) {
      var atls = new atlasObj(ws, kw);
      console.log(atls);
      particles.push(new Particle(random(50, width - 50), random(50, height - 50), {
        ws: ws,
        kw: kw
      }));
    });
  });
}

function setupWeakSignals() {
  //clipping keyword list to random selected words until wordCount reached
  for (var i in jsonData) {
    var wordCount = 5;
    var items, index, item;

    if (jsonData[i]["keywords"].length > wordCount) {
      var newItems = [];

      for (var j = 0; j < wordCount; j++) {
        items = jsonData[i]["keywords"];
        index = Math.floor(Math.random() * items.length);
        item = items.splice(index, 1);
        newItems.push(item[0]); // console.log(item[0]);
      }

      console.log(newItems);
      jsonData[i]["keywords"] = newItems.slice();
    }
  } // console.log(jsonData);
  // console.log('setup');
  // console.log(jsonData);


  var j = 0,
      k = 0;

  for (var i in jsonData) {
    console.log(j, k);
    attractors.push(new Attractor(jsonData[i]["name"], j, k));
    weaksignals.push(jsonData[i]["name"]);
    keywords.push(jsonData[i]["keywords"]);
    console.log('hit');
    $(".s" + j + k).html("<h1>" + jsonData[i]["name"] + "</h1>");

    if (j == grid - 1) {
      k++;
      j = -1;
    }

    j++;
  } // console.log(weaksignals)
  // 3 * 3 grid

}

function reInit() {
  particles.splice(0, particles.length);
  weaksignals.splice(0, weaksignals.length);
  keywords.splice(0, keywords.length);
  attractors.splice(0, attractors.length);
  setupWeakSignals();
  setupObjects();
}

setInterval(function () {
  reInit();
}, 60000 * 5);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0dHJhY3Rvci5qcyIsInBhcnRpY2xlLmpzIiwic2NyaXB0LmpzIiwic2tldGNoLmpzIl0sIm5hbWVzIjpbIkF0dHJhY3RvciIsIndlYWtzaWduYWwiLCJ4Q29yZCIsInlDb3JkIiwid3MiLCJsZW5ndGgiLCJ3aWR0aCIsInBhZGRpbmciLCJpbnRlcnZhbCIsImdyaWQiLCJjZW50ZXJYIiwiaGVpZ2h0IiwiY2VudGVyWSIsInBvcyIsImNyZWF0ZVZlY3RvciIsInZlbCIsImFjYyIsIm1hc3MiLCJHIiwic2NhbGVyIiwiY2FsY3VsYXRlQXR0cmFjdGlvbiIsInAiLCJmb3JjZSIsInA1IiwiVmVjdG9yIiwic3ViIiwicHVzaCIsIm9wYSIsIm5vaXNlIiwib2Zmc2V0Iiwic3Ryb2tlIiwiY29sb3IiLCJsaW5lIiwieCIsInkiLCJwb3AiLCJkaXN0YW5jZSIsIm1hZyIsImNvbnN0cmFpbiIsIm5vcm1hbGl6ZSIsInN0cmVuZ3RoIiwibXVsdCIsImFwcGx5Rm9yY2UiLCJmIiwiY29weSIsImRpdiIsImFkZCIsInVwZGF0ZSIsImVkZ2VzIiwic2V0IiwiZGlzcGxheSIsInRleHRBbGlnbiIsIkNFTlRFUiIsIlBhcnRpY2xlIiwiYSIsImF0bGFzIiwicmFuZG9tSW50RnJvbUludGVydmFsIiwicmFuZG9tIiwicHJldmlvdXNWZWwiLCJtYXhTcGVlZCIsInRoZXRhIiwic2l6ZSIsImhpc3RvcnkiLCJsaW1pdCIsImZyYW1lQ291bnQiLCJ2Iiwic3BsaWNlIiwidHJhaWxpbmciLCJoZWFkaW5nIiwicmFkaWFucyIsInIiLCJ0cmFuc2xhdGUiLCJ0ZXh0U2l6ZSIsImZpbGwiLCJ0ZXh0Iiwia3ciLCJpIiwicG9pbnQiLCJzZXBhcmF0ZSIsInZlaGljbGVzIiwiZGVzaXJlZHNlcGFyYXRpb24iLCJzdW0iLCJjb3VudCIsImQiLCJkaXN0IiwiZGlmZiIsInN0ZWVyIiwidmVsb2NpdHkiLCJtYXhmb3JjZSIsIm9iaiIsImFwcGx5R3Jhdml0eSIsImF0dHJhY3RvcnMiLCJ0ZXh0MSIsIkJsb3R0ZXIiLCJUZXh0IiwiZmFtaWx5IiwidGV4dDIiLCJtYXRlcmlhbCIsIkNoYW5uZWxTcGxpdE1hdGVyaWFsIiwibWF0ZXJpYWwyIiwiRmxpZXNNYXRlcmlhbCIsImJsb3R0ZXIyIiwidGV4dHMiLCJzY29wZTIiLCJmb3JUZXh0IiwiYXBwZW5kVG8iLCJkb2N1bWVudCIsImJvZHkiLCJzZXRUaW1lb3V0IiwiZWxlbWVudCIsIiQiLCJkZXRhY2giLCJwcmVwZW5kIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsInR5cGUiLCJvbmxvYWQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJoaWRlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsImpRdWVyeSIsIndpbmRvdyIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInBhcnRpY2xlcyIsIndlYWtzaWduYWxzIiwia2V5d29yZHMiLCJqc29uRGF0YSIsInByZWxvYWQiLCJqc29uRmlsZSIsImxvYWRKU09OIiwiY29uc29sZSIsImxvZyIsImNudiIsImF0bGFzT2JqIiwia2V5d29yZCIsImNlbnRlckNhbnZhcyIsImNyZWF0ZUNhbnZhcyIsIndpbmRvd1dpZHRoIiwid2luZG93SGVpZ2h0IiwicG9zaXRpb24iLCJ3aW5kb3dSZXNpemVkIiwic2V0dXAiLCJzZXR1cFdlYWtTaWduYWxzIiwidGV4dEZvbnQiLCJmcmFtZVJhdGUiLCJzZXR1cE9iamVjdHMiLCJkcmF3IiwiYmFja2dyb3VuZCIsImNsZWFyIiwiZm9yRWFjaCIsImoiLCJhdGxzIiwid29yZENvdW50IiwiaXRlbXMiLCJpbmRleCIsIml0ZW0iLCJuZXdJdGVtcyIsInNsaWNlIiwiayIsImh0bWwiLCJyZUluaXQiLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxTQUFTQSxTQUFULENBQW1CQyxVQUFuQixFQUErQkMsS0FBL0IsRUFBc0NDLEtBQXRDLEVBQTZDO0FBQ3pDLE9BQUtDLEVBQUwsR0FBVUgs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Q0FBWSxVQUFaLENBQWQ7QUFDQTZELElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEtBQVo7QUFDQTVCLElBQUFBLENBQUMsQ0FBRSxPQUFPK0MsQ0FBUixHQUFXUSxDQUFaLENBQUQsQ0FBZ0JDLElBQWhCLENBQXFCLFNBQU9qQyxRQUFRLENBQUN6RCxDQUFELENBQVIsQ0FBWSxNQUFaLENBQVAsR0FBNEIsT0FBakQ7O0FBQ0EsUUFBSWlGLENBQUMsSUFBS3BKLElBQUksR0FBQyxDQUFmLEVBQWtCO0FBQ2Q0SixNQUFBQSxDQUFDO0FBQ0RSLE1BQUFBLENBQUMsR0FBRyxDQUFDLENBQUw7QUFDSDs7QUFDREEsSUFBQUEsQ0FBQztBQUNKLEdBdENzQixDQXdDdkI7QUFDQTs7QUFDSDs7QUFFRCxTQUFTVSxNQUFULEdBQWlCO0FBQ2JyQyxFQUFBQSxTQUFTLENBQUNoRSxNQUFWLENBQWlCLENBQWpCLEVBQW1CZ0UsU0FBUyxDQUFDN0gsTUFBN0I7QUFDQThILEVBQUFBLFdBQVcsQ0FBQ2pFLE1BQVosQ0FBbUIsQ0FBbkIsRUFBcUJpRSxXQUFXLENBQUM5SCxNQUFqQztBQUNBK0gsRUFBQUEsUUFBUSxDQUFDbEUsTUFBVCxDQUFnQixDQUFoQixFQUFrQmtFLFFBQVEsQ0FBQy9ILE1BQTNCO0FBQ0FzRixFQUFBQSxVQUFVLENBQUN6QixNQUFYLENBQWtCLENBQWxCLEVBQW9CeUIsVUFBVSxDQUFDdEYsTUFBL0I7QUFFQWdKLEVBQUFBLGdCQUFnQjtBQUNoQkcsRUFBQUEsWUFBWTtBQUNmOztBQUdEZ0IsV0FBVyxDQUFDLFlBQVU7QUFDbEJELEVBQUFBLE1BQU07QUFDVCxDQUZVLEVBRVIsUUFBUSxDQUZBLENBQVgiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEF0dHJhY3Rvcih3ZWFrc2lnbmFsLCB4Q29yZCwgeUNvcmQpIHtcbiAgICB0aGlzLndzID0gd2Vha3NpZ25hbDtcbiAgICB2YXIgbGVuZ3RoID0gd2lkdGggLSAyKnBhZGRpbmc7XG4gICAgdmFyIGludGVydmFsID0gKGxlbmd0aCAvIGdyaWQpO1xuICAgIHZhciBjZW50ZXJYID0gcGFkZGluZyArIGludGVydmFsICogKHhDb3JkKzEpO1xuICAgIGNlbnRlclggPSBjZW50ZXJYIC0gaW50ZXJ2YWwvMjtcbiAgICBsZW5ndGggPSBoZWlnaHQgLSAyKnBhZGRpbmc7XG4gICAgaW50ZXJ2YWwgPSAobGVuZ3RoIC8gZ3JpZCk7XG4gICAgdmFyIGNlbnRlclkgPSBwYWRkaW5nICsgaW50ZXJ2YWwgKiAoeUNvcmQrMSk7XG4gICAgY2VudGVyWSA9IGNlbnRlclkgLSBpbnRlcnZhbC8yO1xuXG4gICAgdGhpcy5wb3MgPSBjcmVhdGVWZWN0b3IoY2VudGVyWCwgY2VudGVyWSk7XG4gICAgdGhpcy52ZWwgPSBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICB0aGlzLmFjYyA9IGNyZWF0ZVZlY3RvcigwLDApO1xuXG4gICAgdGhpcy5tYXNzID0gNjtcbiAgICB0aGlzLkcgPSAyMDsgLy93YXMgODBcbiAgICB0aGlzLnNjYWxlciA9IDU7XG5cbiAgICB0aGlzLmNhbGN1bGF0ZUF0dHJhY3Rpb24gPSBmdW5jdGlvbihwKXtcbiAgICAgICAgLy9jYWxjdWxhdGUgZGlyZWN0aW9uIG9mIGZvcmNlXG4gICAgICAgIHZhciBmb3JjZSA9IHA1LlZlY3Rvci5zdWIodGhpcy5wb3MsIHAucG9zKTtcblxuXG5cbiAgICAgICAgcHVzaCgpO1xuICAgICAgICB2YXIgb3BhID0gbm9pc2UocC5vZmZzZXQpICogMjU1O1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhvcGEpO1xuXG4gICAgICAgIHN0cm9rZShjb2xvcig1MCw1MCw1MCxvcGEpKTtcbiAgICAgICAgLy8gc3Ryb2tlKDI1NSk7XG4gICAgICAgIGxpbmUodGhpcy5wb3MueCwgdGhpcy5wb3MueSwgcC5wb3MueCwgcC5wb3MueSk7XG4gICAgICAgIHBvcCgpO1xuXG4gICAgICAgIC8vZGlzdGFuY2UgYmV0d2VlbiBvYmplY3RzXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGZvcmNlLm1hZygpO1xuXG4gICAgICAgIC8vbGltaXQgdmVjdG9yIHRvIGVsaW1pbmF0ZSBleHRyZW1lIHZhbHVlcyBhdCB2ZXJ5IGNsb3NlIG9yIHZlcnkgZmFyXG4gICAgICAgIC8vIGRpc3RhbmNlID0gY29uc3RyYWluKGRpc3RhbmNlLDIwLDI1KTtcbiAgICAgICAgZGlzdGFuY2UgPSBjb25zdHJhaW4oZGlzdGFuY2UsNTAsNTUpO1xuICAgICAgICAvL05vdCByZWFsbHkgaW1wb3J0YW50IGJ1dCBpcyB3aGF0IGl0IGlzIHRvIGdldCBkaXJlY3Rpb25cbiAgICAgICAgZm9yY2Uubm9ybWFsaXplKCk7XG5cbiAgICAgICAgLy9jYWxjdWxhdGUgZ3Jhdml0YXRpb25hbCBmcm9tIG1hZ25paXR1ZGVcbiAgICAgICAgdmFyIHN0cmVuZ3RoID0gKHRoaXMuRyAqIHRoaXMubWFzcyAqIHAubWFzcykgLyAoZGlzdGFuY2UgKiBkaXN0YW5jZSk7XG5cbiAgICAgICAgLy9nZXQgZm9yY2UgdmVjdG9yIC0tPiBtYWduaXR1ZGUgKiBkaXJlY3Rpb25cbiAgICAgICAgZm9yY2UubXVsdChzdHJlbmd0aCk7XG4gICAgICAgIC8vdmFyIGZvcmNlO1xuICAgICAgICByZXR1cm4gZm9yY2U7XG4gICAgfVxuXG4gICAgdGhpcy5hcHBseUZvcmNlID0gZnVuY3Rpb24oZm9yY2Upe1xuICAgICAgICAvLyBBID0gRiAvTVxuICAgICAgICB2YXIgZiA9IGZvcmNlLmNvcHkoKTtcbiAgICAgICAgZi5kaXYodGhpcy5tYXNzKTtcbiAgICAgICAgdGhpcy5hY2MuYWRkKGYpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5lZGdlcygpO1xuICAgICAgICB0aGlzLnZlbC5hZGQodGhpcy5hY2MpO1xuICAgICAgICB0aGlzLnBvcy5hZGQodGhpcy52ZWwpO1xuICAgICAgICB0aGlzLmFjYy5zZXQoMCwwKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpc3BsYXkgPSBmdW5jdGlvbigpe1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIC8vIGZpbGwoMzAsMjUsMjApO1xuICAgICAgICBzdHJva2UoMzAsMjUsMzApO1xuICAgICAgICAvLyBlbGxpcHNlKHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMubWFzcyAqIHRoaXMuc2NhbGVyLCB0aGlzLm1hc3MgKiB0aGlzLnNjYWxlcik7XG4gICAgICAgIC8vIGZpbGwoMzAsMjUsMjApO1xuICAgICAgICB0ZXh0QWxpZ24oQ0VOVEVSLCBDRU5URVIpO1xuICAgICAgICAvLyB0ZXh0KHRoaXMud3MsIHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xuICAgICAgICBwb3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLmVkZ2VzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPiBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMudmVsLnkgKj0gLTE7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGNyZWF0ZVZlY3Rvcih3aWR0aC8yLCBoZWlnaHQvMik7XG4gICAgICAgICAgICB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcy54ID4gd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMudmVsLnggKj0gLTE7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGNyZWF0ZVZlY3Rvcih3aWR0aC8yLCBoZWlnaHQvMik7XG4gICAgICAgICAgICB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcy54IDwgMCkge1xuICAgICAgICAgICAgdGhpcy52ZWwueCAqPSAtMTtcbiAgICAgICAgICAgIHRoaXMucG9zID0gY3JlYXRlVmVjdG9yKHdpZHRoLzIsIGhlaWdodC8yKTtcbiAgICAgICAgICAgIHRoaXMudmVsID0gY3JlYXRlVmVjdG9yKDAsMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnZlbC54ICo9IC0xO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSBjcmVhdGVWZWN0b3Iod2lkdGgvMiwgaGVpZ2h0LzIpO1xuICAgICAgICAgICAgdGhpcy52ZWwgPSBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImZ1bmN0aW9uIFBhcnRpY2xlKHgseSxhKXtcbiAgICB0aGlzLmF0bGFzID0gYTtcblxuICAgIHRoaXMub2Zmc2V0ID0gcmFuZG9tSW50RnJvbUludGVydmFsKDAsMTAwKS8xMDA7XG5cblxuXG4gICAgdGhpcy5wb3MgPSBjcmVhdGVWZWN0b3IoeCwgeSk7XG4gICAgdGhpcy52ZWwgPSBjcmVhdGVWZWN0b3IocmFuZG9tKC0zLDMpLHJhbmRvbSgtMywzKSk7XG4gICAgdGhpcy5hY2MgPSBjcmVhdGVWZWN0b3IoMCwtOCk7XG5cbiAgICAvLyB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICAgIC8vIHRoaXMuYWNjID0gY3JlYXRlVmVjdG9yKDAsMCk7XG5cbiAgICB0aGlzLm1hc3MgPSAxMDtcbiAgICB0aGlzLkcgPSA1O1xuICAgIHRoaXMucHJldmlvdXNWZWwgPSBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICB0aGlzLm1heFNwZWVkID0gMztcblxuICAgIHRoaXMudGhldGEgPSAwLjA7XG4gICAgdGhpcy5zaXplID0gMjA7XG4gICAgLy8gdGhpcy5tYXhGb3JjZSA9IDE7XG5cbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcblxuXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSAwLjE7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5lZGdlcygpO1xuICAgICAgICB0aGlzLnZlbC5hZGQodGhpcy5hY2MpO1xuICAgICAgICB0aGlzLnZlbC5saW1pdCh0aGlzLm1heFNwZWVkKTtcbiAgICAgICAgdGhpcy5wb3MuYWRkKHRoaXMudmVsKTtcbiAgICAgICAgdGhpcy5hY2Muc2V0KDAsMCk7XG5cblxuICAgICAgICBpZiAoZnJhbWVDb3VudCAlIDEwID09IDEpe1xuICAgICAgICAgICAgdmFyIHYgPSBjcmVhdGVWZWN0b3IodGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaCh2KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gOCl7XG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnNwbGljZSgwLDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wb3MpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjdXJyZW50IF4gbGFzdCB2XCIpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5oaXN0b3J5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGxheSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMudHJhaWxpbmcoKTtcbiAgICAgICAgdmFyIHRoZXRhID0gdGhpcy52ZWwuaGVhZGluZygpICsgcmFkaWFucyg5MCk7XG4gICAgICAgIHRoaXMudGhldGEgKz0gKHRoaXMudmVsLnggKiB0aGlzLnZlbC5tYWcoKSkgLyAyMDtcbiAgICAgICAgdmFyIHIgPSA0O1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIHRyYW5zbGF0ZSh0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcbiAgICAgICAgLy8gcm90YXRlKHRoaXMudGhldGEpO1xuICAgICAgICB0ZXh0QWxpZ24oQ0VOVEVSLCBDRU5URVIpO1xuICAgICAgICB0ZXh0U2l6ZSgxMik7XG4gICAgICAgIHN0cm9rZSgyNTUpO1xuICAgICAgICBmaWxsKDIyNSk7XG4gICAgICAgIHRleHQodGhpcy5hdGxhcy5rdywgMCwwKTtcbiAgICAgICAgcG9wKCk7XG4gICAgfVxuXG4gICAgdGhpcy50cmFpbGluZyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oaXN0b3J5Lmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLmhpc3RvcnlbaV07XG4gICAgICAgICAgICBwdXNoKCk7XG4gICAgICAgICAgICB0cmFuc2xhdGUocG9zLngsIHBvcy55KTtcbiAgICAgICAgICAgIHN0cm9rZSgnI2YyZGQxYycpO1xuICAgICAgICAgICAgZmlsbCgyMjUpO1xuXG4gICAgICAgICAgICBwb2ludCgwLDApO1xuICAgICAgICAgICAgcG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmVkZ2VzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHRoaXMucG9zLnggPCAtdGhpcy5zaXplKSB0aGlzLnBvcy54ID0gd2lkdGgrdGhpcy5zaXplO1xuICAgICAgICBpZiAodGhpcy5wb3MueSA8IC10aGlzLnNpemUpIHRoaXMucG9zLnkgPSBoZWlnaHQrdGhpcy5zaXplO1xuICAgICAgICBpZiAodGhpcy5wb3MueCA+IHdpZHRoK3RoaXMuc2l6ZSkgdGhpcy5wb3MueCA9IC10aGlzLnNpemU7XG4gICAgICAgIGlmICh0aGlzLnBvcy55ID4gaGVpZ2h0K3RoaXMuc2l6ZSkgdGhpcy5wb3MueSA9IC10aGlzLnNpemU7XG4gICAgfVxuXG4gICAgdGhpcy5zZXBhcmF0ZSA9IGZ1bmN0aW9uKHZlaGljbGVzKSB7XG4gICAgICAgIHZhciBkZXNpcmVkc2VwYXJhdGlvbiA9IHRoaXMuc2l6ZSoxLjE7XG4gICAgICAgIHZhciBzdW0gPSBjcmVhdGVWZWN0b3IoKTtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZWhpY2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGQgPSBwNS5WZWN0b3IuZGlzdCh0aGlzLnBvcywgdmVoaWNsZXNbaV0ucG9zKTtcbiAgICAgICAgICAgIGlmICgoZCA+IDApICYmIChkIDwgZGVzaXJlZHNlcGFyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBwNS5WZWN0b3Iuc3ViKHRoaXMucG9zLCB2ZWhpY2xlc1tpXS5wb3MpO1xuICAgICAgICAgICAgICAgIGRpZmYubm9ybWFsaXplKCk7XG4gICAgICAgICAgICAgICAgZGlmZi5kaXYoZCk7XG4gICAgICAgICAgICAgICAgc3VtLmFkZChkaWZmKTtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICAgIHN1bS5kaXYoY291bnQpO1xuICAgICAgICAgICAgc3VtLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgc3VtLm11bHQodGhpcy5tYXhTcGVlZCAqIDIpO1xuICAgICAgICAgICAgdmFyIHN0ZWVyID0gcDUuVmVjdG9yLnN1YihzdW0sIHRoaXMudmVsb2NpdHkpO1xuICAgICAgICAgICAgc3RlZXIubGltaXQodGhpcy5tYXhmb3JjZSk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5Rm9yY2Uoc3RlZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hcHBseUZvcmNlID0gZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdmFyIGYgPSBmb3JjZS5jb3B5KCk7XG4gICAgICAgIGYuZGl2KHRoaXMubWFzcyk7XG4gICAgICAgIHRoaXMuYWNjLmFkZChmKTtcbiAgICB9XG5cbiAgICAvL2NhbGN1bGF0ZSBhdHRyYWN0aW9uXG4gICAgdGhpcy5jYWxjdWxhdGVBdHRyYWN0aW9uID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgLy9jYWxjdWxhdGUgZGlyZWN0aW9uIG9mIGZvcmNlXG4gICAgICAgIHZhciBmb3JjZSA9IHA1LlZlY3Rvci5zdWIodGhpcy5wb3MsIG9iai5wb3MpO1xuXG4gICAgICAgIC8vZGlzdGFuY2UgYmV0d2VlbiBvYmplY3RzXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGZvcmNlLm1hZygpO1xuICAgICAgICAvL2xpbWl0IHZlY3RvciB0byBlbGltaW5hdGUgZXh0cmVtZSB2YWx1ZXMgYXQgdmVyeSBjbG9zZSBvciB2ZXJ5IGZhclxuICAgICAgICAvL2Rpc3RhbmNlID0gY29uc3RyYWluKGRpc3RhbmNlLDIwLDI1KTtcbiAgICAgICAgLy9Ob3QgcmVhbGx5IGltcG9ydGFudCBidXQgaXMgd2hhdCBpdCBpcyB0byBnZXQgZGlyZWN0aW9uXG4gICAgICAgIGZvcmNlLm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgIC8vY2FsY3VsYXRlIGdyYXZpdGF0aW9uYWwgZnJvbSBtYWduaWl0dWRlXG4gICAgICAgIHZhciBzdHJlbmd0aCA9ICh0aGlzLkcgKiB0aGlzLm1hc3MgKiBvYmoubWFzcykgLyAoZGlzdGFuY2UgKiBkaXN0YW5jZSk7XG5cbiAgICAgICAgLy9nZXQgZm9yY2UgdmVjdG9yIC0tPiBtYWduaXR1ZGUgKiBkaXJlY3Rpb25cbiAgICAgICAgZm9yY2UubXVsdChzdHJlbmd0aCk7XG4gICAgICAgIC8vdmFyIGZvcmNlO1xuICAgICAgICByZXR1cm4gZm9yY2U7XG4gICAgfVxuXG4gICAgdGhpcy5hcHBseUdyYXZpdHkgPSBmdW5jdGlvbigpe1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJhY3RvcnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdmFyIGEgPSBhdHRyYWN0b3JzW2ldO1xuICAgICAgICAgICAgaWYgKGEud3MgPT09IHRoaXMuYXRsYXMud3MpeyAvL2dldCBldmVyeW9uZSBhcHBsaWVkIHRvIGFuZCBhdHRyYWN0IHRvIGl0XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2F0dHJhY3RlZCB0bzogJyArIGEud3MpO1xuICAgICAgICAgICAgICAgIHZhciBmID0gYS5jYWxjdWxhdGVBdHRyYWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGYpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlGb3JjZShmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufVxuIiwiLy8gKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxudmFyIHRleHQxID0gbmV3IEJsb3R0ZXIuVGV4dChcInVuZGVyIGNvbnN0cnVjdGlvbiDwn5GB4oCN8J+XqFwiLCB7XG4gICAgZmFtaWx5IDogXCJPdmVycGFzcyBNb25vXCIsXG4gICAgc2l6ZSA6IDg0LFxuICAgIGZpbGwgOiBcIiMxNzE3MTdcIlxufSk7XG5cbnZhciB0ZXh0MiA9IG5ldyBCbG90dGVyLlRleHQoXCJBVExBUyBPRiBXRUFLIFNJR05BTFNcIiwge1xuICAgIGZhbWlseSA6IFwiJ05leGEgQm9sZCcsIHNhbnMtc2VyaWZcIixcbiAgICBzaXplIDogNTQsXG4gICAgZmlsbCA6IFwiIzE3MTcxN1wiXG59KTtcblxudmFyIG1hdGVyaWFsID0gbmV3IEJsb3R0ZXIuQ2hhbm5lbFNwbGl0TWF0ZXJpYWwoKTtcbnZhciBtYXRlcmlhbDIgPSBuZXcgQmxvdHRlci5GbGllc01hdGVyaWFsKCk7XG5cbi8vIHZhciBibG90dGVyMSA9IG5ldyBCbG90dGVyKG1hdGVyaWFsLCB7IHRleHRzIDogdGV4dDEgfSk7XG4vLyB2YXIgc2NvcGUxID0gYmxvdHRlcjEuZm9yVGV4dCh0ZXh0MSk7XG4vLyBzY29wZTEuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XG5cbnZhciBibG90dGVyMiA9IG5ldyBCbG90dGVyKG1hdGVyaWFsMiwgeyB0ZXh0cyA6IHRleHQyIH0pO1xudmFyIHNjb3BlMiA9IGJsb3R0ZXIyLmZvclRleHQodGV4dDIpO1xuc2NvcGUyLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuXG5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgdmFyIGVsZW1lbnQgPSAkKCcuYi1jYW52YXMnKS5kZXRhY2goKTtcbiAgICAkKCcubW9kYWwnKS5wcmVwZW5kKGVsZW1lbnQpO1xufSwyMDAwKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiU0NSSVBUXCIpO1xuICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy9qcXVlcnkvMS43LjEvanF1ZXJ5Lm1pbi5qcyc7XG4gICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjY2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnLm1vZGFsJykuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuXG5cbi8vaHR0cHM6Ly9jb2RlcGVuLmlvL1NpbW9uRXZhbnMvcGVuL1BRS2d5UVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2JyYWRsZXkvYmxvdHRlclxuLy8gaHR0cHM6Ly9ibG90dGVyLmpzLm9yZy8jL2RvY3VtZW50YXRpb24iLCJmdW5jdGlvbiByYW5kb21JbnRGcm9tSW50ZXJ2YWwobWluLG1heCl7IC8vbWluIG1heCBtYXkgYmUgaW5jbHVkZWRcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihtYXgtbWluKzEpK21pbik7XG59XG5cblxudmFyIHBhcnRpY2xlcyA9IFtdO1xudmFyIGxpbWl0ID0gMTA7XG52YXIgd2Vha3NpZ25hbHMgPSBbXTtcbnZhciBrZXl3b3JkcyA9IFtdO1xudmFyIGF0dHJhY3RvcnMgPSBbXTtcbnZhciBqc29uRGF0YSA9IHt9O1xudmFyIHBhZGRpbmcgPSAxMDA7XG52YXIgZ3JpZCA9IDU7XG5cblxuZnVuY3Rpb24gcHJlbG9hZCgpIHtcbiAgICB2YXIganNvbkZpbGUgPSBcIi4uL2RhdGEvZnJvbXNwcmVhZHNoZWV0Lmpzb25cIjtcbiAgICBqc29uRGF0YSA9IGxvYWRKU09OKGpzb25GaWxlKTtcbiAgICBjb25zb2xlLmxvZyhqc29uRGF0YSk7XG59XG5cbnZhciBjbnY7XG5cblxudmFyIGF0bGFzT2JqID0gZnVuY3Rpb24od2Vha3NpZ25hbCwga2V5d29yZCl7XG4gICAgdGhpcy5rdyA9IGtleXdvcmQ7XG4gICAgdGhpcy53cyA9IHdlYWtzaWduYWw7XG59O1xuXG5mdW5jdGlvbiBjZW50ZXJDYW52YXMoKSB7XG4gICAgY252ID0gY3JlYXRlQ2FudmFzKHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpO1xuICAgIHZhciB4ID0gKHdpbmRvd1dpZHRoIC0gd2lkdGgpIC8gMjtcbiAgICB2YXIgeSA9ICh3aW5kb3dIZWlnaHQgLSBoZWlnaHQpIC8gMjtcbiAgICBjbnYucG9zaXRpb24oeCwgeSk7XG59XG5cbmZ1bmN0aW9uIHdpbmRvd1Jlc2l6ZWQoKSB7XG4gICAgY2VudGVyQ2FudmFzKCk7XG59XG5cbmZ1bmN0aW9uIHNldHVwKCkge1xuICAgIGNlbnRlckNhbnZhcygpO1xuICAgIHNldHVwV2Vha1NpZ25hbHMoKTtcbiAgICB0ZXh0Rm9udChcIk92ZXJwYXNzIE1vbm9cIik7XG4gICAgZnJhbWVSYXRlKDYwKTtcbiAgICBzZXR1cE9iamVjdHMoKTtcbn1cblxuZnVuY3Rpb24gZHJhdygpIHtcbiAgICBiYWNrZ3JvdW5kKCcjMDAwJyk7XG4gICAgY2xlYXIoKTtcblxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGFydGljbGVzW2ldLmFwcGx5R3Jhdml0eSgpO1xuICAgICAgICAvLyBwYXJ0aWNsZXNbaV0uc2VwYXJhdGUocGFydGljbGVzKTtcbiAgICAgICAgLy8gcGFydGljbGVzW2ldLnNlcGFyYXRlKGF0dHJhY3RvcnMpO1xuICAgICAgICBwYXJ0aWNsZXNbaV0udXBkYXRlKCk7XG4gICAgICAgIHBhcnRpY2xlc1tpXS5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgdGV4dFNpemUoMTQpO1xuICAgIGZpbGwoMCk7XG4gICAgYXR0cmFjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGEpe1xuICAgICAgICBhLnVwZGF0ZSgpO1xuICAgICAgICBhLmRpc3BsYXkoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0dXBPYmplY3RzKCl7XG4gICAgd2Vha3NpZ25hbHMuZm9yRWFjaChmdW5jdGlvbih3cywgaSl7XG4gICAgICAgIGtleXdvcmRzW2ldLmZvckVhY2goZnVuY3Rpb24oa3csIGope1xuICAgICAgICAgICAgdmFyIGF0bHMgPSBuZXcgYXRsYXNPYmood3MsIGt3KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGF0bHMpO1xuICAgICAgICAgICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKHJhbmRvbSg1MCwgd2lkdGggLSA1MCksIHJhbmRvbSg1MCwgaGVpZ2h0IC0gNTApLCB7d3M6d3MsIGt3Omt3fSkpO1xuICAgICAgICB9KTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBzZXR1cFdlYWtTaWduYWxzKCl7XG5cbiAgICAvL2NsaXBwaW5nIGtleXdvcmQgbGlzdCB0byByYW5kb20gc2VsZWN0ZWQgd29yZHMgdW50aWwgd29yZENvdW50IHJlYWNoZWRcbiAgICBmb3IgKHZhciBpIGluIGpzb25EYXRhKXtcbiAgICAgICAgdmFyIHdvcmRDb3VudCA9IDU7XG4gICAgICAgIHZhciBpdGVtcywgaW5kZXgsIGl0ZW07XG4gICAgICAgIGlmIChqc29uRGF0YVtpXVtcImtleXdvcmRzXCJdLmxlbmd0aCA+IHdvcmRDb3VudCkge1xuICAgICAgICAgICAgdmFyIG5ld0l0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHdvcmRDb3VudDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBqc29uRGF0YVtpXVtcImtleXdvcmRzXCJdO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGl0ZW1bMF0pO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW1bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3SXRlbXMpO1xuICAgICAgICAgICAganNvbkRhdGFbaV1bXCJrZXl3b3Jkc1wiXSA9IG5ld0l0ZW1zLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coanNvbkRhdGEpO1xuXG5cbiAgICAvLyBjb25zb2xlLmxvZygnc2V0dXAnKTtcbiAgICAvLyBjb25zb2xlLmxvZyhqc29uRGF0YSk7XG5cbiAgICB2YXIgaiA9IDAsIGsgPSAwO1xuICAgIGZvciAodmFyIGkgaW4ganNvbkRhdGEpe1xuICAgICAgICBjb25zb2xlLmxvZyhqLGspO1xuICAgICAgICBhdHRyYWN0b3JzLnB1c2gobmV3IEF0dHJhY3Rvcihqc29uRGF0YVtpXVtcIm5hbWVcIl0sIGosIGspKTtcbiAgICAgICAgd2Vha3NpZ25hbHMucHVzaChqc29uRGF0YVtpXVtcIm5hbWVcIl0pO1xuICAgICAgICBrZXl3b3Jkcy5wdXNoKGpzb25EYXRhW2ldW1wia2V5d29yZHNcIl0pO1xuICAgICAgICBjb25zb2xlLmxvZygnaGl0Jyk7XG4gICAgICAgICQoKFwiLnNcIiArIGopK2spLmh0bWwoXCI8aDE+XCIranNvbkRhdGFbaV1bXCJuYW1lXCJdICtcIjwvaDE+XCIpO1xuICAgICAgICBpZiAoaiA9PSAoZ3JpZC0xKSl7XG4gICAgICAgICAgICBrKys7XG4gICAgICAgICAgICBqID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaisrO1xuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKHdlYWtzaWduYWxzKVxuICAgIC8vIDMgKiAzIGdyaWRcbn1cblxuZnVuY3Rpb24gcmVJbml0KCl7XG4gICAgcGFydGljbGVzLnNwbGljZSgwLHBhcnRpY2xlcy5sZW5ndGgpO1xuICAgIHdlYWtzaWduYWxzLnNwbGljZSgwLHdlYWtzaWduYWxzLmxlbmd0aCk7XG4gICAga2V5d29yZHMuc3BsaWNlKDAsa2V5d29yZHMubGVuZ3RoKTtcbiAgICBhdHRyYWN0b3JzLnNwbGljZSgwLGF0dHJhY3RvcnMubGVuZ3RoKTtcblxuICAgIHNldHVwV2Vha1NpZ25hbHMoKTtcbiAgICBzZXR1cE9iamVjdHMoKTtcbn1cblxuXG5zZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgIHJlSW5pdCgpO1xufSwgNjAwMDAgKiA1KTsiXX0=
